import{x as S,r as M,m as l,n as P,q as L,t as F,W as $,Z as c,a2 as v,$ as u,a0 as h,a1 as m,U as b,a4 as V,a3 as R,a5 as q}from"./index.3d5fc47d.js";import{d as U,e as B,c as w,_ as D}from"./VTextField.ec96131c.js";import{a as N,b as T,o as I,c as z,U as A,W as E,d as W,m as j,e as X,f as Y,v as Z,g as G,X as H,Y as J,h as K,_ as O,j as k}from"./VAvatar.2b2ac5a6.js";import{V as Q}from"./VSpacer.d76f9282.js";import{V as _}from"./VAlert.acf865a2.js";import{f as x}from"./forwardRefs.54bb1675.js";import{V as ee}from"./VCard.52bc57a8.js";class se{constructor(s,n){this.email=s,this.password=n}}const oe=S({name:"VForm",props:{...U()},emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,s){let{slots:n,emit:p}=s;const d=B(e),o=M();function a(r){r.preventDefault(),d.reset()}function g(r){const i=r,t=d.validate();i.then=t.then.bind(t),i.catch=t.catch.bind(t),i.finally=t.finally.bind(t),p("submit",i),i.defaultPrevented||t.then(f=>{let{valid:C}=f;if(C){var y;(y=o.value)==null||y.submit()}}),i.preventDefault()}return N(()=>{var r;return l("form",{ref:o,class:"v-form",novalidate:!0,onReset:a,onSubmit:g},[(r=n.default)==null?void 0:r.call(n,d)])}),x(d,o)}});const ae=S({name:"VSheet",props:{color:String,...T(),...I(),...z(),...A(),...E(),...W(),...j(),...P()},setup(e,s){let{slots:n}=s;const{themeClasses:p}=L(e),{backgroundColorClasses:d,backgroundColorStyles:o}=X(F(e,"color")),{borderClasses:a}=Y(e),{dimensionStyles:g}=Z(e),{elevationClasses:r}=G(e),{locationStyles:i}=H(e),{positionClasses:t}=J(e),{roundedClasses:f}=K(e);return()=>l(e.tag,{class:["v-sheet",p.value,d.value,a.value,r.value,t.value,f.value],style:[o.value,g.value,i.value]},n)}}),te={data:()=>({form:!1,user:new se(null,null),repeat_password:null,loading:!1,show1:!1,show2:!1,isLoginMode:!0,message:null}),computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},created(){this.loggedIn&&this.$router.push("/")},methods:{onSubmit(){!this.form||(this.message=null,this.loading=!0,this.isLoginMode?this.$store.dispatch("auth/login",this.user).then(()=>{this.$router.replace(this.$route.query.redirect||"/")},e=>{this.loading=!1,e.response.status===401?this.message=this.$t("login.401_message"):this.message=this.$t("error")}):this.$store.dispatch("auth/register",this.user).then(()=>{$.track("New User Registered"),this.$router.replace(this.$route.query.redirect||"/")},e=>{this.loading=!1,e.response.status===400?this.message=this.$t("login.400_message"):this.message=this.$t("error")}))},required(e){return!!e||this.$t("login.required")},valid_mail(e){return/.+@.+\..+/.test(e)||this.$t("login.notvalid_mail")},min(e){return e.length>=8||this.$t("login.min_8")},PasswordMatch(e){return e===this.user.password||this.$t("login.mismatch_password")},onSwitchMode(){this.isLoginMode===!0&&$.track("Register Clicked"),this.isLoginMode=!this.isLoginMode}}},le={class:"font-weight-bold text-h4 ma-2 pa-2"},re=h("img",{class:"ml-5 mr-5",src:D},null,-1),ie={class:"font-weight-bold text-h6 ma-2 pa-2"},ne=h("br",null,null,-1);function de(e,s,n,p,d,o){return c(),v(ae,{class:"absolute-fill pa-12",style:{"background-color":"#F5F5F5"}},{default:u(()=>[l(ee,{class:"mx-auto px-6 py-8",style:q(e.$i18n.locale==="AR"?"direction: rtl;text-align:center;margin-top: 50px":"text-align:center;margin-top: 50px"),"max-width":"344"},{default:u(()=>[h("p",le,m(e.isLoginMode?e.$t("nav.login"):e.$t("login.create")),1),re,h("p",ie,m(e.$t("homepage.goal")),1),l(Q),e.message?(c(),v(_,{key:0,variant:"outlined",type:"warning",prominent:"",border:"top",style:{color:"#F79191 !important","margin-bottom":"20px"}},{default:u(()=>[b(m(e.message),1)]),_:1})):V("",!0),l(oe,{modelValue:e.form,"onUpdate:modelValue":s[6]||(s[6]=a=>e.form=a),onSubmit:R(o.onSubmit,["prevent"])},{default:u(()=>[l(w,{modelValue:e.user.email,"onUpdate:modelValue":s[0]||(s[0]=a=>e.user.email=a),readonly:e.loading,rules:[o.required,o.valid_mail],class:"mb-2",clearable:"",variant:"underlined",label:e.$t("login.email"),placeholder:e.$t("login.email_placeholder"),"prepend-inner-icon":"mdi-email-outline"},null,8,["modelValue","readonly","rules","label","placeholder"]),l(w,{modelValue:e.user.password,"onUpdate:modelValue":s[1]||(s[1]=a=>e.user.password=a),readonly:e.loading,variant:"underlined",type:e.show1?"text":"password",label:e.$t("login.password"),"prepend-inner-icon":"mdi-lock-outline",placeholder:e.$t("login.password_placeholder"),"append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[o.required,o.min],hint:e.$t("login.hint"),clearable:"","onClick:append":s[2]||(s[2]=a=>e.show1=!e.show1)},null,8,["modelValue","readonly","type","label","placeholder","append-icon","rules","hint"]),e.isLoginMode?V("",!0):(c(),v(w,{key:0,modelValue:e.repeat_password,"onUpdate:modelValue":s[3]||(s[3]=a=>e.repeat_password=a),readonly:e.loading,variant:"underlined",type:e.show2?"text":"password",label:e.$t("login.repeat_password"),placeholder:e.$t("login.repeat_password_placeholder"),"prepend-inner-icon":"mdi-lock-outline","append-icon":e.show2?"mdi-eye":"mdi-eye-off",rules:[o.required,o.PasswordMatch],hint:e.$t("login.hint"),clearable:"","onClick:append":s[4]||(s[4]=a=>e.show2=!e.show2)},null,8,["modelValue","readonly","type","label","placeholder","append-icon","rules","hint"])),ne,l(k,{disabled:!e.form,loading:e.loading,block:"",style:{"background-color":"#5FD083",color:"#fff"},size:"large",type:"submit",variant:"elevated"},{default:u(()=>[b(m(e.isLoginMode?e.$t("nav.login"):e.$t("login.create")),1)]),_:1},8,["disabled","loading"]),l(k,{style:{"margin-top":"20px"},variant:"text",color:"info",onClick:s[5]||(s[5]=a=>o.onSwitchMode())},{default:u(()=>[b(m(e.isLoginMode?e.$t("login.no_account"):e.$t("login.have_account")),1)]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1},8,["style"])]),_:1})}const ve=O(te,[["render",de]]);export{ve as default};
